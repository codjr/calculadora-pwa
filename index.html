<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Conversor de Imagens PWA</title>

<!-- Manifesto PWA -->
<link rel="manifest" href="manifest.webmanifest">
<meta name="theme-color" content="#004aad">
<link rel="icon" type="image/png" href="icons/imagem_icon_192x192.png">

<style>
:root {
  --cor-primaria: #004aad;
  --cor-primaria-hover: #003b8e;
  --cor-fundo: #f5f7fa;
  --cor-texto: #1f2937;
  --cor-card: #ffffff;
}
body {
  font-family: "Inter", "Segoe UI", sans-serif;
  background: var(--cor-fundo);
  color: var(--cor-texto);
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 2rem;
  min-height: 100vh;
}
h1 {
  color: var(--cor-primaria);
  margin-bottom: 1rem;
  text-align: center;
}
.card {
  background: var(--cor-card);
  padding: 1.5rem;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  max-width: 420px;
  width: 100%;
  text-align: center;
}
input[type="file"], select, input[type="number"], button {
  width: 100%;
  padding: 10px;
  margin: 0.5rem 0;
  border-radius: 8px;
  border: 1px solid #ccc;
}
button {
  background: var(--cor-primaria);
  color: #fff;
  cursor: pointer;
  transition: 0.3s;
}
button:hover {
  background: var(--cor-primaria-hover);
}
img {
  margin-top: 1rem;
  max-width: 100%;
  border-radius: 10px;
}
footer {
  margin-top: 2rem;
  font-size: 0.85rem;
  opacity: 0.7;
  text-align: center;
}
</style>
</head>
<body>
  <h1>Conversor e Gerador de √çcones PWA</h1>

  <div class="card">
    <input type="file" id="upload" accept="image/*">

    <label for="format">Formato:</label>
    <select id="format">
      <option value="image/png">PNG</option>
      <option value="image/jpeg">JPG</option>
      <option value="image/webp">WEBP</option>
    </select>

    <label for="size">Tamanho:</label>
    <select id="size">
      <option value="original">Original</option>
      <option value="192">192√ó192</option>
      <option value="256">256√ó256</option>
      <option value="512">512√ó512</option>
      <option value="custom">Personalizado</option>
    </select>

    <div id="customSize" style="display:none;">
      <input type="number" id="customWidth" placeholder="Largura (px)">
      <input type="number" id="customHeight" placeholder="Altura (px)">
    </div>

    <button id="convertBtn">Converter e Baixar</button>
    <button id="generateAllBtn">Gerar √çcones PWA (48‚Äì512px)</button>
    <div id="preview"></div>
  </div>

  <footer>üí° Funciona offline e gera todos os tamanhos padr√£o de √≠cones PWA!</footer>

<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('service-worker.js')
    .then(() => console.log("‚úÖ Service Worker registrado"));
}

const upload = document.getElementById("upload");
const format = document.getElementById("format");
const sizeSelect = document.getElementById("size");
const customSizeDiv = document.getElementById("customSize");
const preview = document.getElementById("preview");
let currentImage = null;

// Mostrar campos personalizados
sizeSelect.addEventListener("change", () => {
  customSizeDiv.style.display = sizeSelect.value === "custom" ? "block" : "none";
});

// Exibir preview da imagem
upload.addEventListener("change", (e) => {
  const file = e.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = (event) => {
    const img = new Image();
    img.src = event.target.result;
    img.onload = () => {
      currentImage = img;
      preview.innerHTML = "";
      preview.appendChild(img);
    };
  };
  reader.readAsDataURL(file);
});

// Fun√ß√£o para converter e baixar
function converterEbaixar(img, formato, largura, altura, nomeExtra = "") {
  const canvas = document.createElement("canvas");
  canvas.width = largura;
  canvas.height = altura;
  const ctx = canvas.getContext("2d");
  ctx.drawImage(img, 0, 0, largura, altura);

  const base64 = canvas.toDataURL(formato);
  const a = document.createElement("a");
  a.href = base64;
  a.download = `imagem${nomeExtra}_${largura}x${altura}.${formato.split("/")[1]}`;
  a.click();
}

// Bot√£o √∫nico de convers√£o
document.getElementById("convertBtn").addEventListener("click", () => {
  if (!currentImage) return alert("Selecione uma imagem primeiro!");

  let width = currentImage.width;
  let height = currentImage.height;

  if (sizeSelect.value !== "original") {
    if (sizeSelect.value === "custom") {
      width = parseInt(document.getElementById("customWidth").value) || width;
      height = parseInt(document.getElementById("customHeight").value) || height;
    } else {
      width = height = parseInt(sizeSelect.value);
    }
  }

  converterEbaixar(currentImage, format.value, width, height);
});

// Gerar todos os tamanhos padr√£o de √≠cones PWA
document.getElementById("generateAllBtn").addEventListener("click", () => {
  if (!currentImage) return alert("Selecione uma imagem primeiro!");

  const tamanhos = [48, 72, 96, 128, 144, 152, 192, 256, 384, 512];
  const formato = "image/png";

  tamanhos.forEach((tamanho, i) => {
    setTimeout(() => {
      converterEbaixar(currentImage, formato, tamanho, tamanho, `_icon`);
    }, i * 300);
  });

  alert("üéâ Todos os √≠cones foram gerados e baixados!");
});
</script>
</body>
</html>/body>
</html>